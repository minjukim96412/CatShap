<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="users">

    <!-- 사용자 등록 -->
    <insert id="registUsers" parameterType="Users">
	    INSERT INTO users (
	        USERNO, GRADENO, USID, UNAME, UPASS, UNICK, EMAIL, UTELECOM, UPHONE,
	        USTATUS, UMAILADDRESS, UADDRESS, UDETAILADDRESS, UREGDATE, UUPDATE, MGRCHECK, MKTAGREE, UTOTALPRICE
	    )
	    VALUES (
	        seq_userno.nextval, 1, #{usid}, #{uname}, #{upass}, #{unick}, #{email}, #{utelecom}, #{uphone},
	        'Y', #{umailAddress}, #{uaddress}, #{udetailAddress}, SYSDATE, NULL, 'N', #{mktAgree}, 0
	    )
	</insert>

    <!-- 사용자 목록 조회 -->
    <select id="getUsersList" resultType="Users">
        SELECT *
        FROM users
    </select>

    <select id="isUsidTaken" parameterType="String" resultType="int">
	    SELECT COUNT(*)
	    FROM users
	    WHERE USID = #{usid}
	</select>
	
	<select id="isUnickTaken" parameterType="String" resultType="int">
	    SELECT COUNT(*)
	    FROM users
	    WHERE UNICK = #{unick}
	</select>

</mapper>

